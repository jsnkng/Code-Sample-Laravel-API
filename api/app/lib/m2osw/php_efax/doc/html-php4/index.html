<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>PHP eFax: Main Page</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">PHP eFax
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">PHP eFax Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="summary"></a>
Summary</h2>
<dl class="user"><dt><b></b></dt><dd><a class="el" href="index.html#intro">Introduction</a></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="el" href="index.html#product">How do I get my own copy of this product?</a></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="el" href="index.html#require">Requirements</a></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="el" href="index.html#send">Sending a Fax</a></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="el" href="index.html#disposition">Parsing the fax disposition</a></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="el" href="index.html#inbound">Receiving an inbound fax request</a></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="el" href="index.html#security">Security considerations</a></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="el" href="index.html#failures">Handling eFax failures</a></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="el" href="index.html#errors">Error Handling</a></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="el" href="index.html#changes">Changes between versions</a></dd></dl>
<dl class="user"><dt><b></b></dt><dd><a class="el" href="index.html#copyright">Copyright (c) 2007-2010 Made to Order Software Corp.</a></dd></dl>
<h2><a class="anchor" id="intro"></a>
Introduction</h2>
<p>Welcome to the PHP <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> documentation.</p>
<p>What is <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a>? <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> is a company that let's you send and receive faxes via the Internet (see <a href="http://www.efax.com">http://www.efax.com</a>). The faxes can be sent to a standard paper fax or to a virtual fax machine (i.e. to your <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> account.) There are two interfaces:</p>
<p>(1) an email interface used to send and receive documents from a set of standard email addresses.</p>
<p>(2) a secure HTTPS API called <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> Developer or business <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a>. It can be used in a totally automated way to send and receive faxes via a web interface using the standard HTTPS protocol for communication.</p>
<p>At Made to Order Software, we use <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> for Order Made! Our easy to use ordering system for restaurants. <a href="https://secure.m2osw.com/resto/system/list.php">https://secure.m2osw.com/resto/system/list.php</a></p>
<p>To use the <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> class, create an <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> object and either set the parameter to send a fax, or parse the disposition message. That's it! The rest of the work is handled internally by the class.</p>
<p>IMPORTANT NOTE: The secure HTTPS API requires YOU to have a secure website with a valid certificate. The certificate must be validated by an entity such as godaddy.com or verysign.com (there are hundreds of companies offering certificates now a day.) Without a valid certificate, the response from <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> Developer will NOT work. This is beyond what we can do for you with PHP <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a>.</p>
<dl class="user"><dt><b></b></dt><dd>Back to <a class="el" href="index.html#summary">Summary</a></dd></dl>
<h2><a class="anchor" id="product"></a>
How do I get my own copy of this product?</h2>
<p>The source code for this class is available for sale on our m2osw.com website.</p>
<p>Click on <a href="http://www.m2osw.com/products" target="_blank">Products</a> at the top, search for PHP <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a>, and <a href="https://secure.m2osw.com/cart.phtml?set=php_efax1_0" target="_blank">add it to your cart</a>. Then simply go through our checkout process. A few seconds after we receive your payment, you will gain access to the download area where you will be able to download the PHP <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> package.</p>
<dl class="user"><dt><b></b></dt><dd>Back to <a class="el" href="index.html#summary">Summary</a></dd></dl>
<h2><a class="anchor" id="require"></a>
Requirements</h2>
<p>The class requires the availability of HttpRequest.</p>
<p>For a <b>Microsoft</b> <b>Windows</b> system, you can find pre-compiled versions of the HttpRequest module, called php_http.dll at the following URL:</p>
<p><a href="http://pecl4win.php.net/list.php" target="_blank">http://pecl4win.php.net/list.php</a></p>
<p>Please, make sure that the version is correct for your system. The home page for the PECL code for Windows is at <a href="http://pecl4win.php.net/index.php" target="_blank">PECL4WIN</a>.</p>
<p>A good tutorial for IIS and even Unix users on how to install HttpRequest can be found on <a href="http://www.iis-aid.com/articles/how_to_guides/enabling_php_pecl_extensions_for_windows" target="_blank">IIS Aid</a>.</p>
<p>If it is not already installed on your <b>Debian</b> system use the following commands to retrieve and recompile a version on your system:</p>
<div class="fragment"><pre class="fragment">    sudo apt-<span class="keyword">get</span> install php-pear
    sudo apt-<span class="keyword">get</span> install php5-dev
    sudo pecl install pecl_http
</pre></div><p>Then edit your /etc/php/apache2/php.ini file and add the following line at the end:</p>
<div class="fragment"><pre class="fragment">    extension=http.so
</pre></div><p>For <b>FedoraCore</b> and other RPM based systems, use <code>yum</code> instead of <code>apt-get</code>. The pecl command is the same.</p>
<div class="fragment"><pre class="fragment">    sudo yum install php-xml
    sudo yum install php-devel
    sudo pecl install pecl_http
    sudo yum install php-pear-HTTP-Request
</pre></div><p>The php-xml is to get the DOMDocument support.</p>
<p>Once the HTTP Request module installed, add the following at the end of your /etc/php.ini file:</p>
<div class="fragment"><pre class="fragment">    extension=http.so
</pre></div><dl class="user"><dt><b></b></dt><dd>Back to <a class="el" href="index.html#summary">Summary</a></dd></dl>
<h2><a class="anchor" id="send"></a>
Sending a Fax</h2>
<p>The following code shows how you create an <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> object, initializes it to send a fax and finally <code><a class="el" href="classeFax.html#ac214b3de019427a4658b90fb7d41446b" title="Send the message to eFax.">eFax::send()</a></code> the fax.</p>
<p>The parameters are only examples. You will need to set the parameters to what you need for your specific needs.</p>
<div class="fragment"><pre class="fragment">    $efax = <span class="keyword">new</span> <a class="code" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a>;

    <span class="comment">// mandatory parameters</span>
    $efax-&gt;<a class="code" href="classeFax.html#a478ff23c17705eb363052dc9d831ce2f" title="Set the account idenfitier.">set_account_id</a>(<span class="stringliteral">&quot;9169881450&quot;</span>);
    $efax-&gt;set_user_name(<span class="stringliteral">&quot;made_to_order_software&quot;</span>);
    $efax-&gt;set_user_password(<span class="stringliteral">&quot;TopSecret&quot;</span>);
    $efax-&gt;add_file(<span class="stringliteral">&quot;txt&quot;</span>, <span class="stringliteral">&quot;This is the content of my text file&quot;</span>);
    $efax-&gt;add_recipient(<span class="stringliteral">&quot;Alexis Wilke&quot;</span>, <span class="stringliteral">&quot;Made to Order Software&quot;</span>, <span class="stringliteral">&quot;9169881450&quot;</span>);

    <span class="comment">// Though this is mandatory, the constructor sets the default that</span>
    <span class="comment">// you should not need to modify.</span>
    $efax-&gt;set_outbound_url(<span class="stringliteral">&quot;https://secure.efaxdeveloper.com/EFax_WebFax.serv&quot;</span>);

    <span class="comment">// mandatory if set_duplicated_id(false);</span>
    $efax-&gt;set_fax_id(<span class="stringliteral">&quot;Fax #123456&quot;</span>);

    <span class="comment">// mandatory if set_disposition_method(&quot;EMAIL&quot;);</span>
    $efax-&gt;add_disposition_email(<span class="stringliteral">&quot;Alexis Wilke&quot;</span>, <span class="stringliteral">&quot;alexis@m2osw.com&quot;</span>);

    <span class="comment">// mandatory if set_disposition_method(&quot;POST&quot;);</span>
    $efax-&gt;set_disposition_url(<span class="stringliteral">&quot;https://secure.m2osw.com/fax-disposition.php&quot;</span>);

    <span class="comment">// optional flags</span>
    $efax-&gt;set_disposition_level(eFax::RESPOND_ERROR | eFax::RESPOND_SUCCESS);
    $efax-&gt;set_disposition_method(<span class="stringliteral">&quot;POST&quot;</span>);
    $efax-&gt;set_duplicate_id(<span class="keyword">false</span>);
    $efax-&gt;set_fax_header(<span class="stringliteral">&quot;   @DATE @TIME Made to Order Software Corporation&quot;</span>);
    $efax-&gt;set_priority(<span class="stringliteral">&quot;HIGH&quot;</span>);
    $efax-&gt;set_resolution(<span class="stringliteral">&quot;STANDARD&quot;</span>);
    $efax-&gt;set_self_busy(<span class="keyword">true</span>);

    <span class="comment">// ready to send the fax</span>
    $result = $efax-&gt;send($efax-&gt;message());
    <span class="keywordflow">if</span>($result)
    {
        ... <span class="comment">// handle success</span>
    }
    <span class="keywordflow">else</span>
    {
        ... <span class="comment">// handle failure</span>
    }
</pre></div><dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classeFax.html#a478ff23c17705eb363052dc9d831ce2f" title="Set the account idenfitier.">eFax::set_account_id()</a> <a class="el" href="classeFax.html#ae73ad4fdd46f0a837b90ad9b0a7de158" title="Add an email address for the response.">eFax::add_disposition_email()</a> <a class="el" href="classeFax.html#a79225eab66bbcea46a7cc230c4b8c5f9" title="Defines the return URL to signal disposition of the request.">eFax::set_disposition_url()</a> <a class="el" href="classeFax.html#a19ce81ce19df22499a6e3dfe2153ce70" title="Defines the type of reply.">eFax::set_disposition_level()</a> <a class="el" href="classeFax.html#ad29a494570a733f855cfa00781291f18" title="Defines the method to use to send the reply.">eFax::set_disposition_method()</a> <a class="el" href="classeFax.html#a4e31ec9be377be9005f0c93396e54e70" title="Set whether fax identifiers can be duplicated.">eFax::set_duplicate_id()</a> <a class="el" href="classeFax.html#a3c2fea332f3304dff321da967717f732" title="Defines the fax header.">eFax::set_fax_header()</a> <a class="el" href="classeFax.html#a4aa24280abb6255f673e01297be80098" title="Set this fax request identifier.">eFax::set_fax_id()</a> <a class="el" href="classeFax.html#ab7c6b2556d288e8bee4769beb0076c75" title="Add a file: the content of the fax.">eFax::add_file()</a> <a class="el" href="classeFax.html#a2d5951b20036fd174cc36191928e1e93" title="Set the URL used to send the fax.">eFax::set_outbound_url()</a> <a class="el" href="classeFax.html#a86614bd9c1c30357170d96454b893be8" title="Set the priority for this transmission.">eFax::set_priority()</a> <a class="el" href="classeFax.html#a080d23125c5f6eaad11838e152ef1ac5" title="Add a recipient name, company and fax number.">eFax::add_recipient()</a> <a class="el" href="classeFax.html#a029aabc8123236bda0a16bbd15177c31" title="Set the resolution used for transmission.">eFax::set_resolution()</a> <a class="el" href="classeFax.html#aba9c9547407a27e3327ef55d17f82ec1" title="Queue faxes sent to the same number.">eFax::set_self_busy()</a> <a class="el" href="classeFax.html#a24896c24ce9cd61c0c09bf9c9f51cc4d" title="Set the user name.">eFax::set_user_name()</a> <a class="el" href="classeFax.html#a1e525e17b0b61761460fd2218d7372a2" title="Set the user password.">eFax::set_user_password()</a> <a class="el" href="classeFax.html#ac214b3de019427a4658b90fb7d41446b" title="Send the message to eFax.">eFax::send()</a></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Back to <a class="el" href="index.html#summary">Summary</a></dd></dl>
<h2><a class="anchor" id="disposition"></a>
Parsing the fax disposition</h2>
<p>Whenever you receive the fax disposition message from <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a>, call the <code><a class="el" href="classeFax.html#a4ea5ebaafa2d9a631ef2993c841c8e14" title="Function used to parse the disposition.">eFax::parse_disposition()</a></code> function with the XML data included in the message. Then you can use different get functions to retrieve the resulting information.</p>
<p>The disposition will be sent to the disposition URL. In our previous example it is:</p>
<p>https://secure.m2osw.com/fax-disposition.php</p>
<div class="fragment"><pre class="fragment">    <span class="comment">// Get the XML message</span>
    $xml = stripslashes($_POST[<span class="stringliteral">&quot;xml&quot;</span>]);

    $efax = <span class="keyword">new</span> <a class="code" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a>;

    <span class="comment">// the parser checks the validity of the user name and password</span>
    $efax-&gt;<a class="code" href="classeFax.html#a24896c24ce9cd61c0c09bf9c9f51cc4d" title="Set the user name.">set_user_name</a>(<span class="stringliteral">&quot;made_to_order_software&quot;</span>);
    $efax-&gt;set_user_password(<span class="stringliteral">&quot;TopSecret&quot;</span>);

    <span class="comment">// parse the XML message</span>
    <span class="keywordflow">if</span>($efax-&gt;parse_disposition($xml))
    {
        <span class="comment">// get the results and do something with it</span>
        <span class="comment">// \c eFax::get_result_fax_id() returns the identifier that you sent to</span>
        <span class="comment">// eFax using the \c eFax::set_fax_id() function; very useful to know</span>
        <span class="comment">// which fax is being disposed of</span>
        $my_var = $efax-&gt;get_result_fax_id();
        $my_var = $efax-&gt;get_result_docid();
        $my_var = $efax-&gt;get_result_fax_number();
        $my_var = $efax-&gt;get_result_completion_date();
        $my_var = $efax-&gt;get_result_fax_status();
        $my_var = $efax-&gt;get_result_csid();
        $my_var = $efax-&gt;get_result_duration();
        $my_var = $efax-&gt;get_result_pages();
        $my_var = $efax-&gt;get_result_retries();
    }
    <span class="keywordflow">else</span>
    {
        ... <span class="comment">// handle error case</span>
    }
</pre></div><dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classeFax.html#adc9d4f0f7143ba7bf20c2602a58f26a5" title="Return the fax identifier.">eFax::get_result_fax_id()</a> <a class="el" href="classeFax.html#ae1a59fbb76d475a46e4045197a65c69d" title="Return the document identifier from a disposition or inbound request.">eFax::get_result_docid()</a> <a class="el" href="classeFax.html#add0af4b0b30214d6fe806544d73f2b04" title="Return the fax number at the other end.">eFax::get_result_fax_number()</a> <a class="el" href="classeFax.html#a333bbc32415748c2a75f5fdc6171b4ec" title="Return the date and time when the transmission ended.">eFax::get_result_completion_date()</a> <a class="el" href="classeFax.html#a6b58e6ca9cf595b59f7a5d051204fbdc" title="Return the disposition or fax request status.">eFax::get_result_fax_status()</a> <a class="el" href="classeFax.html#a96bea6d94982babab571d7dc2cc15059" title="Return the recipient or sender fax machine identification.">eFax::get_result_csid()</a> <a class="el" href="classeFax.html#af20b40117e2752e3dac2957de54d0c44" title="Return the duration of the fax transmission.">eFax::get_result_duration()</a> <a class="el" href="classeFax.html#a15ff4d836fdc6bdadcc7d1e547a29884" title="Return the number of pages sent.">eFax::get_result_pages()</a> <a class="el" href="classeFax.html#a33c2c4cb71e81e3cdfba60c0cf59b10d" title="Return the number of times eFax had to dial to process the fax.">eFax::get_result_retries()</a> <a class="el" href="classeFax.html#a4ea5ebaafa2d9a631ef2993c841c8e14" title="Function used to parse the disposition.">eFax::parse_disposition()</a> <a class="el" href="classeFax.html#a24896c24ce9cd61c0c09bf9c9f51cc4d" title="Set the user name.">eFax::set_user_name()</a> <a class="el" href="classeFax.html#a1e525e17b0b61761460fd2218d7372a2" title="Set the user password.">eFax::set_user_password()</a></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Back to <a class="el" href="index.html#summary">Summary</a></dd></dl>
<h2><a class="anchor" id="inbound"></a>
Receiving an inbound fax request</h2>
<p>Whenever you receive a fax from a sender, <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> Developer posts a notification to a URL you specify in your <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> Developer account. This HTTP POST message includes an XML file that PHP <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> will parse for you. See the <code><a class="el" href="classeFax.html#a142744b619eb65784827f7defe904231" title="Parse an Inbound Fax.">eFax::parse_inbound_message</a></code>(] function for additional information.</p>
<p>Then you can use different get functions to retrieve the resulting information.</p>
<p>The request will be sent to the URL you define in your account. At that URL, you will have a PHP file that includes what follows:</p>
<dl class="user"><dt><b>Warning</b></dt><dd>The user name and password for the inbound <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> processing are defined in the inbound settings screen. These can be made the same as the outbound user name and password, although I would suggest you use a different user namd and a different password to increase your security level.</dd></dl>
<div class="fragment"><pre class="fragment">    ... -- some initialization code such as require_once(<span class="stringliteral">&#39;efax.php&#39;</span>);

    <span class="comment">// Get the XML message</span>
    $xml = stripslashes($_POST[<span class="stringliteral">&quot;xml&quot;</span>]);

    $efax = <span class="keyword">new</span> <a class="code" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a>;

    <span class="comment">// the parser checks the validity of the user name and password</span>
    <span class="comment">// (setup in Inbound Settings of your eFax developer account;</span>
    <span class="comment">// will be empty strings by default which fails with PHP eFax)</span>
    $efax-&gt;<a class="code" href="classeFax.html#a24896c24ce9cd61c0c09bf9c9f51cc4d" title="Set the user name.">set_user_name</a>(<span class="stringliteral">&quot;made_to_order_software&quot;</span>);
    $efax-&gt;set_user_password(<span class="stringliteral">&quot;TopSecret&quot;</span>);

    <span class="comment">// parse the XML message</span>
    <span class="keywordflow">if</span>($efax-&gt;parse_inbound_message($xml))
    {
        <span class="comment">// get the results and do something with it</span>

        <span class="comment">// InboundPostRequest/RequestControl/RequestDate</span>
        $my_var = $efax-&gt;get_result_request_date();

        <span class="comment">// InboundPostRequest/RequestControl/RequestType</span>
        $my_var = $efax-&gt;get_result_request_type();

        <span class="comment">// InboundPostRequest/FaxControl/AccountID</span>
        $my_var = $efax-&gt;get_result_fax_id();

        <span class="comment">// InboundPostRequest/FaxControl/ANI</span>
        $my_var = $efax-&gt;get_result_fax_number();

        <span class="comment">// InboundPostRequest/FaxControl/CSID</span>
        $my_var = $efax-&gt;get_result_csid();

        <span class="comment">// InboundPostRequest/FaxControl/DateReceived</span>
        $my_var = $efax-&gt;get_result_completion_date();

        <span class="comment">// InboundPostRequest/FaxControl/FaxName</span>
        $my_var = $efax-&gt;get_result_fax_name();

        <span class="comment">// InboundPostRequest/FaxControl/MCFID</span>
        $my_var = $efax-&gt;get_result_docid();

        <span class="comment">// InboundPostRequest/FaxControl/PageCount</span>
        $my_var = $efax-&gt;get_result_pages();

        <span class="comment">// InboundPostRequest/FaxControl/Status</span>
        $my_var = $efax-&gt;get_result_fax_status();

        <span class="comment">// InboundPostRequest/FaxControl/UserFieldControl/*</span>
        $my_var = $efax-&gt;get_result_user_fields();

        <span class="comment">// InboundPostRequest/FaxControl/BarcodeControl/*</span>
        $my_var = $efax-&gt;get_result_barcodes();

        <span class="comment">// InboundPostRequest/FaxControl/FileContents</span>
        <span class="comment">//   or</span>
        <span class="comment">// InboundPostRequest/FaxControl/PageContentControl/*</span>
        $my_var = $efax-&gt;get_result_files();
    }
    <span class="keywordflow">else</span>
    {
        ... <span class="comment">// handle error case</span>
    }
</pre></div><dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classeFax.html#aaf64a130ca635c77925a83fb68ee3919" title="Retrieve the array of barcode keys.">eFax::get_result_barcodes()</a> <a class="el" href="classeFax.html#a333bbc32415748c2a75f5fdc6171b4ec" title="Return the date and time when the transmission ended.">eFax::get_result_completion_date()</a> <a class="el" href="classeFax.html#a96bea6d94982babab571d7dc2cc15059" title="Return the recipient or sender fax machine identification.">eFax::get_result_csid()</a> <a class="el" href="classeFax.html#ae1a59fbb76d475a46e4045197a65c69d" title="Return the document identifier from a disposition or inbound request.">eFax::get_result_docid()</a> <a class="el" href="classeFax.html#adc9d4f0f7143ba7bf20c2602a58f26a5" title="Return the fax identifier.">eFax::get_result_fax_id()</a> <a class="el" href="classeFax.html#a18c5093a64c9ea60692f1bc45deb1377" title="Retrieve the name of the fax received.">eFax::get_result_fax_name()</a> <a class="el" href="classeFax.html#add0af4b0b30214d6fe806544d73f2b04" title="Return the fax number at the other end.">eFax::get_result_fax_number()</a> <a class="el" href="classeFax.html#a6b58e6ca9cf595b59f7a5d051204fbdc" title="Return the disposition or fax request status.">eFax::get_result_fax_status()</a> <a class="el" href="classeFax.html#a9d0d18ac73dffc2d986be273c40c66fe" title="Retrieve the fax pages.">eFax::get_result_files()</a> <a class="el" href="classeFax.html#a15ff4d836fdc6bdadcc7d1e547a29884" title="Return the number of pages sent.">eFax::get_result_pages()</a> <a class="el" href="classeFax.html#a124d02b9c0ae8fae61f870f428e20804" title="Get the date and time when the Inbound fax was received.">eFax::get_result_request_date()</a> <a class="el" href="classeFax.html#abe6ee0daed2e4646fff8c330723cb837" title="Get the type of inbound fax request.">eFax::get_result_request_type()</a> <a class="el" href="classeFax.html#a56c8e6160aab2e591c17939ea0d1503d" title="Retrieve the array of user fields.">eFax::get_result_user_fields()</a> <a class="el" href="classeFax.html#a142744b619eb65784827f7defe904231" title="Parse an Inbound Fax.">eFax::parse_inbound_message()</a> <a class="el" href="classeFax.html#a24896c24ce9cd61c0c09bf9c9f51cc4d" title="Set the user name.">eFax::set_user_name()</a> <a class="el" href="classeFax.html#a1e525e17b0b61761460fd2218d7372a2" title="Set the user password.">eFax::set_user_password()</a></dd></dl>
<dl class="user"><dt><b></b></dt><dd>Back to <a class="el" href="index.html#summary">Summary</a></dd></dl>
<h2><a class="anchor" id="security"></a>
Security considerations</h2>
<p>In <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a>, there are several built in security features.</p>
<p>The main feature is that it only works with an SSL connection. This clearly means secure! The only drawback is that you need a valid certificate in order to send and receive faxes with your system.</p>
<p>The second feature is the login and password. These are passed in the XML data. The one drawback with these is that they are written in clear in the XML data. In other words, anyone can read them if they somehow intercept your message (but remember, on the Internet the message is encrypted and thus no one can read the login and password.)</p>
<dl class="user"><dt><b></b></dt><dd>IMPORTANT: Do not save the XML in clear on your hard drive unless you know for sure that it is safe. If you want to save it for storage or archival, think about removing the login and password first.</dd></dl>
<p>Similarly, whenever you create an XML file to be sent to <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> Developer, you need to incorporate the Login and Password in clear in that XML document. So watch out and consider saving that information in a protected place on your hard disk. A place only accessible to the part of your application dealing with the sending and receiving of faxes.</p>
<p>Another less obvious security feature is the use of the XML format. That ensures a strong structure preventing many invalid requests. For instance, for inbound messages, we check a certain number of entries that need to be valid for the request to be accepted as an <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> Developer request. This part is handled by the <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> class so you do not have to worry about it.</p>
<h2><a class="anchor" id="failures"></a>
Handling eFax failures</h2>
<p>Whenever you receive an <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> failure such as "Your request failed due to invalid data" you need to check out your <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> object setup and the data that you are sending. I suggest you try sending documents that you trust are correct (was created with guenine tools.) If those fail too, then there is another problem.</p>
<p>The debugging is somewhat difficult because <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> Developer does not give you much info about what goes right and what goes wrong. Note, however that they keep a copy of the outbound response on their server. So if somehow you do not get that response, you can at least see what they were going to tell you.</p>
<p>The main reason why you would not receive the response is because you did not specify a URL with the HTTPS protocol (secure). Or because your certificate cannot be verified by <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> Developer.</p>
<p>Note that some <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> errors will not happen. For instance, the "Account identifier argument was not passed" error will be prevented by <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> which checks that you specified the identifier before it forwards the XML packet.</p>
<p>Other failures are possible. For instance, the fax number may not be valid.</p>
<p>Internally, the <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> class will automatically retry sending your document up to 5 times. If after 5 times it cannot connect to the <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> Developer server, then it returns with FALSE. In this case, you will NOT get any other error from <a class="el" href="classeFax.html" title="The PHP script to send and receive faxes over the Internet.">eFax</a> Developer since they do not even know you wanted to contact them. Failure to connect happen often at times when they receive a large number of faxes. It is frequent that you have to try to connect a second or third time. It never happened to us that the communication would not happen with 5 attempts. For this reason, the count is hard coded in the <code>send()</code> function. Feel free to increase it if you get that problem once in a while.</p>
<h2><a class="anchor" id="errors"></a>
Error Handling</h2>
<p>PHP 4.x does not support exceptions. Thus, many functions will return false whenever an error is detected, whether the error is caused by the expected function behavior failing (i.e. an HTTP connection failing) or an invalid parameter.</p>
<p><a href="http://www.php.net/manual/en/function.http-request.php">http://www.php.net/manual/en/function.http-request.php</a></p>
<dl class="user"><dt><b></b></dt><dd>Back to <a class="el" href="index.html#summary">Summary</a></dd></dl>
<h2><a class="anchor" id="changes"></a>
Changes between versions</h2>
<p>The following shows what changes between versions. In general, what is listed is what will affect you in some way.</p>
<h3><a class="anchor" id="version1_4"></a>
Changes in 1.4</h3>
<ul>
<li>Added options to the HttpRequest so SSL v3 is forced. Without it and a newer system (such as Intrepid, Ubuntu 8.10) you could get an error saying that the request was invalid because it was empty.</li>
</ul>
<ul>
<li>Added an option so redirects are followed (up to 3 of them)</li>
</ul>
<ul>
<li>Fixed a few small bugs found as we wrote a new test. You are unlikely to have been afected by any of those bugs.</li>
</ul>
<ul>
<li>Enhanced the documentation.</li>
</ul>
<ul>
<li>Include a separate file to support PHP 4.4.0+</li>
</ul>
<h3><a class="anchor" id="version1_3"></a>
Changes in 1.3</h3>
<ul>
<li>Added the "Post Successful" message from within the parse_inbound_message() function. It is sent only if the login and password are accepted and the control information is valid (proper control date).</li>
</ul>
<ul>
<li>Added a version definition in the package so your code can check for the version if need be. (PHP_EFAX_VERSION)</li>
</ul>
<h3><a class="anchor" id="version1_2"></a>
Changes in 1.2</h3>
<ul>
<li>Fixed the set_user_password() function that would checked <code>$user_name</code> instead of <code>$user_password</code>.</li>
</ul>
<ul>
<li>Enhanced the documentation for FedoraCore users.</li>
</ul>
<ul>
<li>Added more comments about the need for a valid HTTPS certificate.</li>
</ul>
<h3><a class="anchor" id="version1_1"></a>
Changes in 1.1</h3>
<ul>
<li>Added support for inbound faxes with the addition of the <code><a class="el" href="classeFax.html#a142744b619eb65784827f7defe904231" title="Parse an Inbound Fax.">eFax::parse_inbound_message()</a></code> function and some eFax::get_result...() functions. Updated the documentation accordingly.</li>
</ul>
<ul>
<li>Added the <a class="el" href="classeFaxBarcode.html" title="A barcode object.">eFaxBarcode</a> class to support reading barcodes from received faxes.</li>
</ul>
<ul>
<li>Fixed the completion date computation. The previous version was affected by your timezone. Now, it properly returns a UTC time.</li>
</ul>
<ul>
<li>Fixed the <code><a class="el" href="classeFax.html#a478ff23c17705eb363052dc9d831ce2f" title="Set the account idenfitier.">eFax::set_account_id()</a></code> function so invalid characters are automatically removed. Added <code><a class="el" href="classeFax.html#a9dacd77c2e161ff25b901d855047f07a" title="Set the account idenfitier.">eFax::set_raw_account_id()</a></code> just in case you need to setup an account identifier with what is supposed to be viewed as otherwise invalid characters.</li>
</ul>
<ul>
<li>Fixed some of the existing documentation to clarify a few points.</li>
</ul>
<ul>
<li><code>eFax::get_result_recipient_csid()</code> was renamed <code><a class="el" href="classeFax.html#a96bea6d94982babab571d7dc2cc15059" title="Return the recipient or sender fax machine identification.">eFax::get_result_csid()</a></code> since it is now used for the notifications of sent faxes and the received faxes. In the later case we are the recipient and thus calling the CSID the recipient was not correct.</li>
</ul>
<ul>
<li><code>eFax::get_result_pages_sent()</code> was renamed <code><a class="el" href="classeFax.html#a15ff4d836fdc6bdadcc7d1e547a29884" title="Return the number of pages sent.">eFax::get_result_pages()</a></code> since it is now used for the notifications of sent faxes and the received faxes. In the later case, it would need to be "pages received" otherwise.</li>
</ul>
<dl class="user"><dt><b></b></dt><dd>Back to <a class="el" href="index.html#summary">Summary</a></dd></dl>
<h2><a class="anchor" id="copyright"></a>
Copyright (c) 2007-2010 Made to Order Software Corp.</h2>
<p>All Rights Reserved.</p>
<p>This software and its associated documentation contains proprietary, confidential and trade secret information of Made to Order Software Corp. and except as provided by written agreement with Made to Order Software Corp.</p>
<p>a) no part may be disclosed, distributed, reproduced, transmitted, transcribed, stored in a retrieval system, adapted or translated in any form or by any means electronic, mechanical, magnetic, optical, chemical, manual or otherwise,</p>
<p>and</p>
<p>b) the recipient is not entitled to discover through reverse engineering or reverse compiling or other such techniques or processes the trade secrets contained therein or in the documentation.</p>
<dl class="user"><dt><b></b></dt><dd>Back to <a class="el" href="index.html#summary">Summary</a> </dd></dl>
</div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Thu Jun 6 2013 02:45:25 for PHP eFax by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
